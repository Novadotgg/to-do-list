<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo List</title>
    <!-- <link rel="stylesheet" href="style.css"> -->
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #000;
            text-align: center;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: #fff;
        }
        
        .container {
            max-width: 600px;
            padding: 100px;
            background-color: #333;
            border-radius: 100px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);
        }
        
        h1 {
            font-size: 46px;
            color: #faf3f2;
        }
        
        input[type="text"] {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            font-size: 18px;
            background-color: #0c0c0c;
            border: 2px solid #777; 
            border-radius: 105px;
            color: #fff; 
            outline: none;
        }
        
        button {
            padding: 1px 10px;
            font-size: 16.5px;
            background-color: #05c46b; 
            color: #fff;
            border: none;
            border-radius: 105px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #096943;
        }
        
        ul {
            padding: 0;
            list-style: none;
            text-align: left;
        }
        
        li {
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background-color: #050505; 
            color: #fff;
            border-radius: 105px;
            max-height: 400px; 
            word-wrap: break-word;
            font-size: 20px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.4);
        }
        
        .completed {
            background-color: #da2e2e; 
        }
        input[type="checkbox"] {
            margin-right: 10px;
        }
        
        .completed .task-text {
            text-decoration: line-through;
        }
        
        
        .remove {
            background-color: #4e4847;
            color: #fff;
            border: none;
            border-radius: 105px;
            cursor: pointer;
            font-size: 16px;
            padding: 5px 10px;
        }
        
        .remove:hover {
            background-color: #696362;
        }
        .task-priority {
            font-size: 14px;
            padding: 2px 6px;
            border: none;
            border-radius: 100px;
            border-radius: 3px;
            color: #fff;
            font-weight: bold;
            text-transform: uppercase;
            margin-left: 8px;
        }
        
        .task-priority.high {
            background-color: #e74c3c;
        }
        
        .task-priority.medium {
            background-color: #e7760c;
        }
        
        .task-priority.low {
            background-color: #27ae60; 
        }
        
    </style>
</head>
<body>
    <div class="container">
        <h1>Todo List</h1>
        <input type="text" id="task" placeholder="Add a new task">
        <input type="date" id="dueDate" placeholder="Due Date">
        <select id="priority">
            <option value="low">Low</option>
            <option value="medium">Medium</option>
            <option value="high">High</option>
        </select>
        <button id="add">Add</button>
        <ul id="taskList">
            <!-- Tasks will be added here dynamically -->
        </ul>
    </div>
    <script>
        const taskInput = document.getElementById("task");
const dueDateInput = document.getElementById("dueDate"); 
const priorityInput = document.getElementById("priority");
const addBtn = document.getElementById("add");
const taskList = document.getElementById("taskList");

document.addEventListener("DOMContentLoaded", () => {
    const storedTasks = JSON.parse(localStorage.getItem("tasks")) || [];
    storedTasks.sort((a, b) => comparePriority(a.priority, b.priority));
    storedTasks.forEach(taskData => {
        addTask(taskData.text, taskData.priority, taskData.dueDate, taskData.completed);
    });
});

function comparePriority(a, b) {
    const priorityOrder = { high: 0, medium: 1, low: 2 };
    return priorityOrder[a] - priorityOrder[b];
}

function addTask(taskText, taskPriority, dueDate, completed = false) {
    const taskItem = document.createElement("li");
    taskItem.innerHTML = `
        <input type="checkbox" class="task-checkbox" ${completed ? 'checked' : ''}>
        <span class="task-text">${taskText}</span>
        <input type="date" class="task-due-date" value="${dueDate}">
        <span class="task-priority ${taskPriority}">${taskPriority}</span>
        <button class="remove">Remove</button>
    `;
    taskItem.className = completed ? "completed" : "";
    taskList.appendChild(taskItem);

    taskItem.querySelector('.task-checkbox').addEventListener("change", () => {
        taskItem.classList.toggle("completed");
        updateTaskCompletion(taskText, taskItem.classList.contains("completed"));
        updateLocalStorage();
    });

    taskItem.querySelector('.task-due-date').addEventListener("change", () => {
        updateTaskDueDate(taskText, taskItem.querySelector('.task-due-date').value);
        updateLocalStorage();
    });

    const removeBtn = taskItem.querySelector(".remove");
    removeBtn.addEventListener("click", () => {
        taskList.removeChild(taskItem);
        removeTask(taskText);
        updateLocalStorage();
    });

    taskItem.dataset.text = taskText;
    taskItem.dataset.priority = taskPriority;
    taskItem.dataset.dueDate = dueDate;
    taskItem.dataset.completed = completed;
}

function updateTaskDueDate(taskText, dueDate) {
    const tasks = Array.from(taskList.children).map(taskItem => {
        if (taskItem.dataset.text === taskText) {
            taskItem.dataset.dueDate = dueDate;
        }
        return {
            text: taskItem.dataset.text,
            priority: taskItem.dataset.priority,
            dueDate: taskItem.dataset.dueDate,
            completed: taskItem.dataset.completed === "true",
        };
    });
    localStorage.setItem("tasks", JSON.stringify(tasks));
}

function updateTaskCompletion(taskText, completed) {
    const tasks = Array.from(taskList.children).map(taskItem => {
        if (taskItem.dataset.text === taskText) {
            taskItem.dataset.completed = completed;
        }
        return {
            text: taskItem.dataset.text,
            priority: taskItem.dataset.priority,
            dueDate: taskItem.dataset.dueDate,
            completed: taskItem.dataset.completed === "true",
        };
    });
    localStorage.setItem("tasks", JSON.stringify(tasks));
}

function removeTask(taskText) {
    const tasks = Array.from(taskList.children).filter(taskItem => taskItem.dataset.text !== taskText).map(taskItem => {
        return {
            text: taskItem.dataset.text,
            priority: taskItem.dataset.priority,
            dueDate: taskItem.dataset.dueDate,
            completed: taskItem.dataset.completed === "true",
        };
    });
    localStorage.setItem("tasks", JSON.stringify(tasks));
}

function updateLocalStorage() {
    const tasks = Array.from(taskList.children).map(taskItem => {
        return {
            text: taskItem.dataset.text,
            priority: taskItem.dataset.priority,
            dueDate: taskItem.dataset.dueDate,
            completed: taskItem.dataset.completed === "true",
        };
    });
    localStorage.setItem("tasks", JSON.stringify(tasks));
}

addBtn.addEventListener("click", () => {
    const taskText = taskInput.value.trim();
    const taskPriority = priorityInput.value;
    const dueDate = dueDateInput.value;

    if (taskText !== "") {
        addTask(taskText, taskPriority, dueDate); 
        taskInput.value = "";
        priorityInput.value = "low";
        dueDateInput.value = ""; 
        updateLocalStorage();
    }
});

    </script>
    <!-- <script src="script.js"></script> -->
</body>
</html>
